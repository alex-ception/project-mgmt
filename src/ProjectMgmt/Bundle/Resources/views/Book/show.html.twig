{% extends 'ProjectMgmtBundle::base.html.twig' %}

{% block content %}
<div class="panel panel-default">
    <div class="panel-body">
        <h1 class="acme" id="book-name" name="{{ book.id }}">
            {{ book.name }}
        </h1>
        <hr>
        {% for chapter in book.chapters %}
        <h3 class="acme{% if chapter.author.id == app.user.id %} chapter-name{% endif %}" name="{{ chapter.id }}">
            {{ chapter.name }}
        </h3>
        <h4 class="acme">
            <small>{{ 'chapter.author'|trans({'%author%': '<a href="'~path('user_show', {'id': chapter.author.id})~'">'~chapter.author.username~'</a>'})|raw }}</small>
            {% if chapter.author.id == app.user.id %}
            <a href="{{ path('chapter_edit', { 'id': chapter.id }) }}" class="pull-right">
                <i class="fa fa-pencil"></i>
            </a>
            {% endif %}
        </h4>
        <hr>
        <p class="text-justify{% if chapter.author.id == app.user.id %} chapter-content{% endif %}" name="{{ chapter.id }}">
            {{ chapter.content }}
        </p>
        {% endfor %}
    </div>
</div>
{% endblock content %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/projectmgmt/js/book.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/projectmgmt/js/chapter.js') }}" type="text/javascript"></script>
{% endblock javascripts %}
